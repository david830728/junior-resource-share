# 预览功能说明

## 功能概述

网站现已支持在线预览功能，用户可以直接在浏览器中预览以下类型的文件：

- 📷 **图片** (JPG, PNG, GIF, WebP)
- 📄 **PDF** 文档
- 🎬 **视频** (MP4, WebM, AVI, MOV)

## 使用方法

### 预览资源

1. 在资源列表中找到想要预览的资源
2. 如果资源支持预览，卡片底部会显示 **"预览"** 按钮（紫色）
3. 点击 **"预览"** 按钮，会弹出预览窗口
4. 在预览窗口中查看资源内容
5. 点击右上角的 **"×"** 按钮关闭预览

### 预览窗口功能

#### 图片预览
- 显示完整的图片内容
- 支持缩放和滚动
- 显示图片信息（标题、学科、学段等）

#### PDF 预览
- 使用浏览器内置的 PDF 查看器
- 支持翻页、缩放、搜索等功能
- 显示 PDF 信息

#### 视频预览
- 使用 HTML5 视频播放器
- 支持播放、暂停、音量调节、全屏等功能
- 显示视频信息

### 预览窗口信息

预览窗口底部显示以下信息：

- **上传者** - 资源的上传者名称
- **文件大小** - 资源的文件大小（MB）
- **下载次数** - 该资源被下载的次数
- **上传时间** - 资源的上传日期
- **描述** - 资源的详细描述（如有）

## 支持的文件类型

### 支持预览的文件类型

| 文件类型 | 扩展名 | 预览方式 |
|---------|--------|---------|
| 图片 | .jpg, .jpeg, .png, .gif, .webp | 直接显示 |
| PDF | .pdf | 浏览器 PDF 查看器 |
| 视频 | .mp4, .webm, .avi, .mov | HTML5 视频播放器 |

### 不支持预览的文件类型

以下文件类型暂不支持在线预览，但仍可下载：

- Word 文档 (.doc, .docx)
- PowerPoint 演示 (.ppt, .pptx)
- 其他文件类型

对于这些文件，请点击 **"下载"** 按钮下载到本地后使用相应的应用程序打开。

## 技术实现

### 前端组件

- **PreviewModal.tsx** - 预览模态框组件
  - 处理不同文件类型的预览逻辑
  - 显示资源信息和元数据
  - 提供关闭预览的功能

### 文件访问

预览功能通过访问 `public/uploads/` 目录中的文件实现：

```
/uploads/{fileName}
```

## 浏览器兼容性

### 图片预览
- ✅ 所有现代浏览器都支持

### PDF 预览
- ✅ Chrome, Edge, Firefox, Safari (最新版本)
- ⚠️ 某些旧版浏览器可能不支持，建议下载后使用 PDF 阅读器

### 视频预览
- ✅ 所有现代浏览器都支持 HTML5 视频
- ⚠️ 视频格式支持取决于浏览器，推荐使用 MP4 格式

## 常见问题

### Q: 为什么某些文件没有预览按钮？

**A**: 只有图片、PDF 和视频文件支持在线预览。其他文件类型（如 Word、PPT）暂不支持，请下载后在本地打开。

### Q: PDF 预览不显示内容怎么办？

**A**: 
1. 检查浏览器是否为最新版本
2. 尝试使用其他浏览器
3. 下载 PDF 文件后使用专业 PDF 阅读器打开

### Q: 视频预览无法播放怎么办？

**A**:
1. 确保视频格式为浏览器支持的格式（推荐 MP4）
2. 检查网络连接
3. 尝试下载后在本地播放

### Q: 预览时加载很慢怎么办？

**A**: 
1. 这可能是网络速度问题，请稍候
2. 如果文件很大，建议下载后在本地查看
3. 检查浏览器是否有其他标签页占用带宽

### Q: 能否添加其他文件类型的预览？

**A**: 可以！如需添加 Word、PPT 等文件的预览功能，可以：
1. 使用第三方预览库（如 OnlyOffice、LibreOffice Online）
2. 将文件转换为 PDF 后预览
3. 使用 Google Docs 等在线查看器

## 未来改进

- [ ] 添加 Word 和 PowerPoint 预览
- [ ] 实现图片缩放和旋转功能
- [ ] 添加预览历史记录
- [ ] 支持更多视频格式
- [ ] 添加注释和标记功能

---

**预览功能已就绪！** 🎉
